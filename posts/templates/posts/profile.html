{% extends 'posts/base.html' %}
{% load post_extras %}
{% block title %}@{{ user.username }} Profile, On Privalise!{% endblock title %}
{% block content %}
	<main class="w-100 container-fluid mx-auto content">
	  {% if messages %}
	     {% for message in messages %}
	        <div class="alert alert-{{ message.tags }} content">{{ message }}</div>
	     {% endfor %}
	  {% endif %}
		<section class="profile">
			<div class="picture-container">
				<img class="profile-picture" src="{{ user.profile.image.url }}">
			</div>
			<h2 class="account-heading">@{{ user.username }}</h2>
			{% if request.user == user %}
	            <a href="{% url 'profile-update' %}">
	           	<button type="button" style="margin-left: 11px;" class="btn btn-outline-info">
		           Settings
	            </button></a>
	            <br/><br/>
            {% else %}
	            {% if is_following == False %}
			        <form method="POST" action='{% url "add-follower" user.username %}'>
			            {% csrf_token %}
				        <button type="submit" style="margin-left: 21px;" class="btn btn-outline-danger">Follow</button>
			        </form>
			        <br/><br/>
	            {% else %}
		            <form method="POST" action='{% url "remove-follower" user.username %}'>
			            {% csrf_token %}
		                <button type="submit" style="margin-left: 21px;"  class="btn btn-outline-danger">UnFollow</button>
		            </form>
		            <br/><br/>
	            {% endif %}
            {% endif %}
            <a href="#hashLink" style="margin-left: 8px; margin-right: 8px;" class="btn btn-outline-danger"><i class="fas fa-user-secret"></i></a> 
		</section>
		            <div>
			    <p id="hashLink">
			        Name: {% if user.profile.name == '' %}NO NAME{% else %}{{user.profile.name}}{% endif %}<br>
			        Monero: {% if user.profile.monero == '' %}NO ADDRESS{% else %}<a href="{% url 'user-details' user.username %}">Show Full Address</a>{% endif %}<br>
			        XMPP: {% if user.profile.xmppusername == ''  or user.profile.xmppserver == '' %}NO XMPP{% else %}{{user.profile.xmppusername}}@{{user.profile.xmppserver}}{% endif %}<br>

			        PGP: {% if user.profile.public_key == '' %}NO KEY{% else %}<a href="{% url 'user-details' user.username %}">Show Full Key</a>{% endif %}<br><br>

			        <a class="btn-primary btn-lg" style="text-decoration: inherit; color: inherit;" href="#">collapse</a>    
			    </p>
			</div>
		<div class="w-100">
			{% for post in posts %}
			<div class="post" style="text-align: left; margin: 0 auto; margin-bottom: 8px;">
			    <div class="picture-containers">
                  <img class="profile-picture post-img" src="{{ post.author.profile.image.url }}">  
	            </div>
				<div class="profile-container">
		    </div>

				<div class="post-content">
					<div class="post-info">
						<div class="post-info1">
							<a class="username" href="{% url 'profile' post.author %}">@{{ post.author }}</a>
							<p class="date">{{ post.date_posted }}</p>

						</div>
    			</div>

					<a style="text-decoration: inherit; color: inherit;" href="{% url 'post-detail' post.pk %}">
						<div class="post-text">
							<p>{{ post.content|convert_markdown|safe }}</p>
							<a style="width: 40%; height: 35%;" href="{% url 'post-detail' post.pk %}" class="btn btn-outline-info">Open Post</a>
						</div>
				   </a>
				</div>
			</div>
			{% endfor %}
		</div>
		<br>
		<center><br/>
		{% if postscount == 0 %}
		<h2>I'm Bored!!</h2>
		{% else %}
	        {% if posts.has_previous %}
	            <a href="?page={{posts.previous_page_number}}" class="btn btn-outline-info"><</a>
	        {% endif %}
	        <span class="btn btn-primary">{{posts.number}}</span>
	        
	        {% if posts.has_next %}
	            <a href="?page={{posts.next_page_number}}" class="btn btn-outline-info">></a>
	        {% endif %}
	    {% endif %}
	    </center>
	</main>
{% endblock content %}